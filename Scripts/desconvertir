#!/bin/bash

# Verificar que se proporcione una carpeta como argumento
if [ -z "$1" ]; then
    echo "‚ùå Uso: $0 <carpeta>"
    exit 1
fi

CARPETA="$1"
contador=0

# Verificar que la carpeta exista
if [ ! -d "$CARPETA" ]; then
    echo "‚ùå La carpeta '$CARPETA' no existe."
    exit 1
fi

# Recorre todos los archivos (ignora subdirectorios)
for archivo in "$CARPETA"/*; do
    if [ -f "$archivo" ]; then
        echo "üîß Procesando archivo: $archivo"

        #### Aqu√≠ va tu tarea personalizada ####

        # Ejemplo: mostrar el tipo de archivo

        ./convert.sh $CARPETA/imagen$contador.png 
	
	base64 -d recuperado.txt > video$contador.mp4
	
	rm recuperado.txt
        let contador=contador+1
        # Ejemplo 2: convertir a base64 y mostrar primeros bytes
        # base64 "$archivo" | head -n 1

        # Ejemplo 3: extraer el primer fotograma si es video
        # ffmpeg -i "$archivo" -vframes 1 "${archivo%.*}.png"

        ########################################

    fi
done

echo "‚úÖ Tarea completada para todos los archivos."

